<!DOCTYPE html>
<html lang="gu">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NEET PHYSICS GUJARATI : GSEB - NEET QUIZ PORTAL</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'amber': {
                            '50': '#fffbeb',
                            '100': '#fef3c7',
                            '200': '#fde68a',
                            '300': '#fcd34d',
                            '400': '#fbbf24',
                            '500': '#f59e0b',
                            '600': '#d97706',
                            '700': '#b45309',
                            '800': '#90400e', /* Corrected 800 value */
                            '900': '#78350f',
                        },
                        'primary': {
                            '50': '#fffbeb',
                            '100': '#fef3c7',
                            '500': '#f59e0b',
                            '700': '#b45309',
                        },
                        'secondary': {
                            '50': '#f0f9ff',
                            '100': '#e0f2fe',
                            '500': '#0ea5e9',
                            '700': '#0369a1',
                        }
                    },
                    animation: {
                        'pulse-slow': 'pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                        'bounce-slow': 'bounce 3s infinite'
                    }
                }
            }
        }
    </script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Hind+Vadodara:wght@400;500;700&display=swap');
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap');
        
        body {
            font-family: 'Hind Vadodara', 'Inter', sans-serif; /* Added Inter for English text */
            background: linear-gradient(135deg, #fffbeb 0%, #f0f9ff 100%);
            background-attachment: fixed;
        }
        
        .app-container {
            background: white;
            border-radius: 1.5rem;
            box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
            overflow: hidden;
        }
        
        .chapter-card {
            transition: all 0.3s ease;
            background: linear-gradient(to bottom, #ffffff 0%, #fdf8f2 100%);
            border: 1px solid rgba(245, 158, 11, 0.2);
            border-radius: 1rem;
            overflow: hidden;
        }
        
        .chapter-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
            border-color: rgba(245, 158, 11, 0.4);
        }
        
        .quiz-btn {
            background: linear-gradient(to right, #f59e0b 0%, #fbbf24 100%);
            transition: all 0.3s ease;
            border-radius: 0.75rem;
            font-weight: 600;
            letter-spacing: 0.5px;
            position: relative;
            overflow: hidden;
        }
        
        .quiz-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 15px -3px rgba(245, 158, 11, 0.3);
        }
        
        .quiz-btn::after {
            content: '';
            position: absolute;
            top: -50%;
            left: -60%;
            width: 20px;
            height: 200%;
            background: rgba(255, 255, 255, 0.3);
            transform: rotate(25deg);
            transition: all 0.6s;
        }
        
        .quiz-btn:hover::after {
            left: 120%;
        }
        
        .option-btn {
            transition: all 0.2s ease;
            border-radius: 0.75rem;
            position: relative;
            overflow: hidden;
            border: 2px solid transparent;
        }
        
        .option-btn:hover:not(:disabled) {
            transform: translateX(5px);
            border-color: #fbbf24;
        }
        
        .option-btn:focus {
            outline: 2px solid #f59e0b;
            outline-offset: 2px;
        }
        
        .option-btn.correct {
            background: linear-gradient(to right, #22c55e 0%, #4ade80 100%);
            color: white;
            border-color: #16a34a;
        }
        
        .option-btn.incorrect {
            background: linear-gradient(to right, #ef4444 0%, #f87171 100%);
            color: white;
            border-color: #dc2626;
        }
        
        .option-btn:disabled {
            cursor: not-allowed;
        }
        
        .solution-box {
            background: linear-gradient(to right, #f0fdf4 0%, #ecfdf5 100%);
            border-left: 4px solid #4ade80;
            padding: 1.25rem;
            margin-top: 1.5rem;
            border-radius: 0.75rem;
            animation: fadeIn 0.5s ease;
        }
        
        .progress-bar {
            transition: width 0.5s ease;
        }
        
        .score-display {
            background: linear-gradient(135deg, #f0f9ff 0%, #fffbeb 100%);
            border-radius: 1rem;
            border: 2px dashed #f59e0b;
        }
        
        .hidden {
            display: none;
        }
        
        .question-image {
            max-width: 100%;
            height: auto;
            margin: 1.25rem 0;
            border-radius: 0.75rem;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            border: 1px solid #e5e7eb;
        }
        
        .image-placeholder {
            background: #f3f4f6;
            border: 2px dashed #d1d5db;
            border-radius: 0.75rem;
            min-height: 150px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #6b7280;
        }
        
        .loading-spinner {
            border: 3px solid rgba(245, 158, 11, 0.2);
            border-top: 3px solid #f59e0b;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            animation: spin 1s linear infinite;
            display: inline-block;
            vertical-align: middle;
            margin-left: 10px;
        }
        
        .result-star {
            animation: bounce-slow 2s infinite;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .nav-btn {
            border-radius: 0.75rem;
            font-weight: 600;
            transition: all 0.3s ease;
            letter-spacing: 0.5px;
            min-width: 120px;
        }
        
        .nav-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
        }

        .language-toggle {
            background-color: #e0f2fe;
            color: #0369a1;
            padding: 0.5rem 1rem;
            border-radius: 0.5rem;
            font-weight: 500;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        .language-toggle:hover {
            background-color: #bfdbfe;
        }
    </style>
    <!-- MathJax Configuration and Loading -->
    <script>
        window.MathJax = {
            tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']]
            },
            svg: {
                fontCache: 'global'
            },
            startup: {
                pageReady: () => {
                    return MathJax.startup.defaultPageReady().then(() => {
                        console.log('MathJax initialized');
                    });
                }
            }
        };
    </script>
    <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js" async></script>
</head>
<body class="min-h-screen p-4">
    <div class="max-w-4xl mx-auto py-8">
        <div class="app-container p-6 sm:p-8">
            <!-- Language Toggle -->
            <div class="flex justify-end mb-4">
                <button id="language-toggle-btn" class="language-toggle">English / ગુજરાતી</button>
            </div>

            <!-- Home Page (Chapters List) -->
            <div id="home-page" class="text-center">
                <div class="mb-10">
                    <h1 id="main-title" class="text-3xl sm:text-4xl font-bold text-amber-700 mb-4">NEET PHYSICS GUJARATI : GSEB - NEET QUIZ PORTAL</h1>
                    <div class="w-24 h-1 bg-amber-500 mx-auto rounded-full mb-6"></div>
                    <p id="home-description" class="text-base text-slate-600 max-w-2xl mx-auto">
                        GSEB બોર્ડ પરીક્ષાના પાછલા વર્ષના પ્રશ્નો (PYQ) પર આધારિત ક્વિઝ દ્વારા તમારા ભૌતિકશાસ્ત્રના જ્ઞાનને ચકાસો અને પરીક્ષાની તૈયારી કરો.
                    </p>
                </div>
                <div id="chapters-container" class="grid grid-cols-1 gap-8">
                    <!-- Chapter cards will be loaded here -->
                </div>
            </div>

            <!-- Quiz Page (Hidden by default) -->
            <div id="quiz-page" class="hidden">
                <div class="flex justify-between items-center mb-6">
                    <div>
                        <h1 id="quiz-title" class="text-xl sm:text-2xl font-bold text-slate-800"></h1>
                        <p id="quiz-description" class="text-sm text-slate-600 mt-1"></p>
                    </div>
                    <div id="progress" class="text-base font-medium bg-amber-100 text-amber-800 py-1 px-3 rounded-full"></div>
                </div>
                
                <div class="w-full bg-gray-200 rounded-full h-2.5 mb-6">
                    <div id="progress-bar" class="progress-bar bg-amber-500 h-2.5 rounded-full" style="width: 0%"></div>
                </div>

                <div id="question-card" class="bg-white p-6 rounded-xl shadow-sm border border-amber-100">
                    <p id="question-text" class="text-lg sm:text-xl text-slate-700 mb-6 leading-relaxed font-medium"></p>
                    
                    <div id="image-container">
                        <img id="question-image" class="question-image hidden" alt="Question Diagram">
                        <div id="image-placeholder" class="image-placeholder hidden">
                            <p id="image-placeholder-text"></p>
                        </div>
                    </div>
                    
                    <div id="options-container" class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                    </div>
                    
                    <div id="solution-display" class="solution-box hidden">
                        <h3 class="font-semibold text-slate-700 mb-3 flex items-center">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2 text-green-500" viewBox="0 0 20 20" fill="currentColor">
                                <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd" />
                            </svg>
                            <span id="solution-heading-text">ઉકેલ:</span>
                        </h3>
                        <p id="solution-text" class="text-slate-600 text-sm sm:text-base"></p>
                    </div>
                </div>
                
                <div class="mt-8 flex justify-between items-center">
                    <button id="prev-btn" class="nav-btn bg-slate-200 text-slate-700 font-bold py-3 px-6 hidden">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 inline mr-1" viewBox="0 0 20 20" fill="currentColor">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd" />
                        </svg>
                        પાછળ
                    </button>
                    <div class="ml-auto flex items-center">
                        <span id="current-score" class="text-sm font-medium bg-blue-100 text-blue-800 py-1 px-3 rounded-full mr-4 hidden">
                            સ્કોર: <span id="score-value">0</span>/<span id="total-questions">0</span>
                        </span>
                        <button id="next-btn" class="nav-btn bg-amber-500 text-white font-bold py-3 px-6 hidden">
                            આગળ
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 inline ml-1" viewBox="0 0 20 20" fill="currentColor">
                                <path fill-rule="evenodd" d="M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z" clip-rule="evenodd" />
                            </svg>
                        </button>
                    </div>
                </div>
            </div>

            <!-- Result Container (Hidden by default) -->
            <div id="result-container" class="text-center hidden">
                <div class="mb-8">
                    <div class="flex justify-center mb-6">
                        <svg class="h-16 w-16 text-amber-500 result-star" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
                            <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z" />
                        </svg>
                    </div>
                    <h2 id="quiz-complete-title" class="text-3xl font-bold text-amber-700 mb-4">ક્વિઝ પૂર્ણ!</h2>
                    <div class="w-16 h-1 bg-amber-500 mx-auto rounded-full mb-6"></div>
                </div>
                
                <div class="score-display p-8 mb-10">
                    <p id="score-text" class="text-xl text-slate-700 mb-2"></p>
                    <p id="score-percentage" class="text-3xl font-bold text-amber-600 mb-6"></p>
                    <div class="flex justify-center space-x-2 mb-6">
                        <div class="w-12 h-2 bg-gray-200 rounded-full overflow-hidden">
                            <div id="score-bar-1" class="h-full bg-green-500"></div>
                        </div>
                        <div class="w-12 h-2 bg-gray-200 rounded-full overflow-hidden">
                            <div id="score-bar-2" class="h-full bg-green-500"></div>
                        </div>
                        <div class="w-12 h-2 bg-gray-200 rounded-full overflow-hidden">
                            <div id="score-bar-3" class="h-full bg-green-500"></div>
                        </div>
                        <div class="w-12 h-2 bg-gray-200 rounded-full overflow-hidden">
                            <div id="score-bar-4" class="h-full bg-green-500"></div>
                        </div>
                        <div class="w-12 h-2 bg-gray-200 rounded-full overflow-hidden">
                            <div id="score-bar-5" class="h-full bg-green-500"></div>
                        </div>
                    </div>
                    <p id="encouragement" class="text-slate-600 italic"></p>
                </div>
                
                <button id="restart-btn" class="nav-btn bg-amber-500 text-white font-bold py-3 px-8 mx-auto">
                    હોમ પેજ પર જાઓ
                </button>
            </div>
        </div>
        
        <footer class="mt-12 text-center text-slate-500 text-sm">
            © 2025 GSEB - NEET Quiz Portal. All rights reserved.
        </footer>
    </div>

    <script>
        // Chapter and Quiz Data Structure (Gujarati content)
        const chapterData = [
            {
                id: 'chapter2',
                name_gu: 'સ્થિત વિદ્યુત સ્થિતિમાન અને કેપેસિટન્સ',
                name_en: 'Electrostatic Potential and Capacitance',
                description_gu: 'આ ક્વિઝ GSEB બોર્ડ પરીક્ષાના પ્રકરણ 2: "સ્થિત વિદ્યુત સ્થિતિમાન અને કેપેસિટન્સ" ના પાછલા વર્ષના પ્રશ્નો (PYQ) પર આધારિત છે. તમારા જ્ઞાનને ચકાસો અને પરીક્ષાની તૈયારી કરો.',
                description_en: 'This quiz is based on Previous Year Questions (PYQ) from Chapter 2: "Electrostatic Potential and Capacitance" of the GSEB Board Exams. Test your knowledge and prepare for the exam.',
                quizzes: [
                    {
                        id: 'chapter2-pyq2025-combined',
                        name_gu: 'PYQ 2025 (સંયુક્ત)',
                        name_en: 'PYQ 2025 (Combined)',
                        questions: [
                            // PYQ માર્ચ 2025 Questions
                            {
                                question_gu: "$4 \\times 10^{-7}$C વિદ્યુતભારથી 9 cm દૂર આવેલા બિંદુએ સ્થિતિમાન કેટલું થાય?",
                                question_en: "What is the potential at a point 9 cm away from a $4 \\times 10^{-7}$C charge?",
                                options_gu: ["$4 \\times 10^4$ V", "$4 \\times 10^5$ V", "$4 \\times 10^{-4}$ V", "$4 \\times 10^3$ V"],
                                options_en: ["$4 \\times 10^4$ V", "$4 \\times 10^5$ V", "$4 \\times 10^{-4}$ V", "$4 \\times 10^3$ V"],
                                answer: 0,
                            },
                            {
                                question_gu: "900 pF ના એક કેપેસિટરને 100 V ની બેટરી વડે વિદ્યુતભારિત કરાય છે. હવે કેપેસિટરનું બેટરીથી જોડાણ દૂર કરી બીજા 900 pF ના વિદ્યુતભાર વિહિન કેપેસિટર સાથે જોડવામાં આવે છે, તો આ પ્રક્રિયામાં કેટલી ઉર્જા ગુમાવાઈ હશે?",
                                question_en: "A 900 pF capacitor is charged by a 100 V battery. The capacitor is then disconnected from the battery and connected to another uncharged 900 pF capacitor. How much energy is lost in this process?",
                                options_gu: ["$2.25 \\times 10^{-6}$ J", "$4.5 \\times 10^{-6}$ J", "$1.125 \\times 10^{-6}$ J", "શૂન્ય"],
                                options_en: ["$2.25 \\times 10^{-6}$ J", "$4.5 \\times 10^{-6}$ J", "$1.125 \\times 10^{-6}$ J", "Zero"],
                                answer: 0,
                            },
                            {
                                question_gu: "2$\\mu$F, 3$\\mu$F અને 4$\\mu$F કેપેસિટન્સના ત્રણ કેપેસિટરોને સમાંતરમાં જોડેલ છે. તો સંયોજનનું કુલ કેપેસિટન્સ કેટલું થાય?",
                                question_en: "Three capacitors of capacitance 2$\\mu$F, 3$\\mu$F and 4$\\mu$F are connected in parallel. What is the total capacitance of the combination?",
                                options_gu: ["$\\frac{13}{12}\\mu$F", "$\\frac{12}{13}\\mu$F", "9$\\mu$F", "12$\\mu$F"],
                                options_en: ["$\\frac{13}{12}\\mu$F", "$\\frac{12}{13}\\mu$F", "9$\\mu$F", "12$\\mu$F"],
                                answer: 2,
                            },
                            // PYQ જૂન 2025 Questions
                            {
                                question_gu: "આકૃતિઓ (a) અને (b) અનુક્રમે ધન અને ઋણ વિદ્યુતભારોની ક્ષેત્ર રેખાઓ દર્શાવે છે. આકૃતિઓ પરથી સ્થિતિમાન તફાવત $V_Q - V_P$ અને $V_A - V_B$ નાં ચિન્હો અનુક્રમે ______ , ______ છે.",
                                question_en: "Figures (a) and (b) show the field lines of positive and negative charges respectively. From the figures, the signs of potential difference $V_Q - V_P$ and $V_A - V_B$ are ______ , ______ respectively.",
                                options_gu: ["ઋણ, ધન", "ઋણ, ઋણ", "ધન, ઋણ", "ધન, ધન"],
                                options_en: ["Negative, Positive", "Negative, Negative", "Positive, Negative", "Positive, Positive"],
                                answer: 0,
                                imageUrl: "image_630175.png-23feb8f6-b53b-4b12-b7bb-13063fae0b26",
                            },
                            {
                                question_gu: "2pF, 3pF અને 4pF કેપેસિટન્સના ત્રણ કેપેસિટરોને શ્રેણીમાં જોડેલ છે તો સંયોજનનું કુલ કેપેસિટન્સ કેટલું હશે?",
                                question_en: "Three capacitors of capacitance 2pF, 3pF and 4pF are connected in series. What will be the total capacitance of the combination?",
                                options_gu: ["24 pF", "$\\frac{12}{13}$pF", "9 pF", "$\\frac{13}{12}$pF"],
                                options_en: ["24 pF", "$\\frac{12}{13}$pF", "9 pF", "$\\frac{13}{12}$pF"],
                                answer: 1,
                            },
                            {
                                question_gu: "વિદ્યુતક્ષેત્રની ઊર્જા ઘનતા $U = \\frac{1}{2}\\epsilon_0 E^2$ નું પારિમાણિક સૂત્ર ______ . (જ્યાં, $\\epsilon_0$ એ મુક્ત અવકાશનો પરાવૈદ્યુતાક અને E વિદ્યુતક્ષેત્ર છે)",
                                question_en: "The dimensional formula of electric field energy density $U = \\frac{1}{2}\\epsilon_0 E^2$ is ______ . (where, $\\epsilon_0$ is the permittivity of free space and E is the electric field)",
                                options_gu: ["M$^1$L$^{-3}$T$^0$A$^0$", "M$^0$L$^1$T$^{-2}$A$^{-1}$", "M$^1$L$^{-1}$T$^{-2}$A$^0$", "M$^1$L$^2$T$^2$A$^1$"],
                                options_en: ["M$^1$L$^{-3}$T$^0$A$^0$", "M$^0$L$^1$T$^{-2}$A$^{-1}$", "M$^1$L$^{-1}$T$^{-2}$A$^0$", "M$^1$L$^2$T$^2$A$^1$"],
                                answer: 2,
                                imageUrl: "image_63011e.png-61126f4e-b53b-4b12-b7bb-13063fae0b26",
                            },
                            {
                                question_gu: "$\\vec{P}$ જેટલી ડાયપોલ ચાકમાત્રા ધરાવતી એક વિદ્યુત ડાયપોલ $\\vec{E}$ જેટલા સમાન વિદ્યુતક્ષેત્ર સાથે $\\theta$ ખૂણે રહેલી હોય તો તેના પર લાગતું ટોર્ક $\\vec{\\tau} = ______$.",
                                question_en: "An electric dipole with dipole moment $\\vec{P}$ is placed at an angle $\\theta$ with a uniform electric field $\\vec{E}$. The torque acting on it is $\\vec{\\tau} = ______$.",
                                options_gu: ["$2aq\\vec{E}$", "$\\vec{P} \\times \\vec{E}$", "$q\\vec{E}$", "$\\vec{E} \\times \\vec{P}$"],
                                options_en: ["$2aq\\vec{E}$", "$\\vec{P} \\times \\vec{E}$", "$q\\vec{E}$", "$\\vec{E} \\times \\vec{P}$"],
                                answer: 1,
                                imageUrl: "image_6300d8.png-6fe605ef-cc83-4fbb-b78b-fb1e92941833",
                            },
                            // PYQ જુલાઈ 2025 Questions
                            {
                                question_gu: "શૂન્યવકાશની પરમિટિવિટી (પરાવૈદ્યુતાક) નો S.I. એકમ ______ છે.",
                                question_en: "The S.I. unit of permittivity of free space is ______.",
                                options_gu: ["Fm$^{-1}$", "Fm$^{-2}$", "Fm$^{-3}$", "Fm"],
                                options_en: ["Fm$^{-1}$", "Fm$^{-2}$", "Fm$^{-3}$", "Fm"],
                                answer: 0,
                                imageUrl: "image_62f19f.png-5e551e76-22bc-44bd-9fb4-dbd7a1e89772",
                            },
                            {
                                question_gu: "4$\\mu$F ના ત્રણ કેપેસિટરોને એવી રીતે જોડવામાં આવેલા છે કે જેથી તેનું પરિણામી કેપેસિટન્સ 6$\\mu$F મળે તો તેમનું જોડાણ ______.",
                                question_en: "Three capacitors of 4$\\mu$F are connected in such a way that their resultant capacitance is 6$\\mu$F. Their connection is ______.",
                                options_gu: ["બે સમાંતર અને તેની સાથે એક શ્રેણીમાં", "બધા શ્રેણીમાં", "બધા સમાંતરમાં", "બે શ્રેણીમાં અને તેની સાથે એક સમાંતરમાં"],
                                options_en: ["Two in parallel and one in series with them", "All in series", "All in parallel", "Two in series and one in parallel with them"],
                                answer: 3,
                                imageUrl: "image_62eeb7.png-29a28ec2-df14-44d2-974e-d453edde2388",
                            }
                        ]
                    },
                    {
                        id: 'chapter2-pyq2024-combined',
                        name_gu: 'PYQ 2024 (સંયુક્ત)',
                        name_en: 'PYQ 2024 (Combined)',
                        questions: [
                            // PYQ GUJCET 2024 Questions
                            {
                                question_gu: "એક વિદ્યુતભારિત પોલા ગોળાની ત્રિજ્યા 10 cm છે. તેની સપાટી પર વિદ્યુતસ્થિતિમાન 100 V છે. તો કેન્દ્રથી 2 cm દૂર વિદ્યુતસ્થિતિમાન ______ હશે.",
                                question_en: "A charged hollow sphere has a radius of 10 cm. Its surface potential is 100 V. What will be the potential at a point 2 cm away from the center?",
                                options_gu: ["200 V", "1 V", "100 V", "0 V"],
                                options_en: ["200 V", "1 V", "100 V", "0 V"],
                                answer: 2,
                                imageUrl: "image_1316df.png-bfc56a7b-b0f3-4b1f-a686-3e5bee40d69b",
                            },
                            {
                                question_gu: "પ્લેટો વચ્ચે હવા હોય તેવા સમાંતર પ્લેટ કેપેસિટરનું કેપેસિટન્સ 4 pF છે. જો પ્લેટો વચ્ચેનું અંતર અડધું કરવામાં આવે અને તેમની વચ્ચેના અવકાશને ડાઇઇલેક્ટ્રિક અચળાંક 6 ધરાવતા દ્રવ્ય વડે ભરી દેવામાં આવે તો તેનું કેપેસિટન્સ ______ થશે.",
                                question_en: "A parallel plate capacitor with air between the plates has a capacitance of 4 pF. If the distance between the plates is halved and the space between them is filled with a material having a dielectric constant of 6, what will be its capacitance?",
                                options_gu: ["12 pF", "24 pF", "98 pF", "48 pF"],
                                options_en: ["12 pF", "24 pF", "98 pF", "48 pF"],
                                answer: 3,
                                imageUrl: "image_1316df.png-bfc56a7b-b0f3-4b1f-a686-3e5bee40d69b",
                            },
                            // PYQ માર્ચ 2024 Questions
                            {
                                question_gu: "r ત્રિજ્યાવાળા વર્તુળાકાર માર્ગના કેન્દ્ર પર +Q વિદ્યુતભાર મુકેલ છે. આ વર્તુળાકાર માર્ગના કોઈ એક વ્યાસના એક અંત્યબિંદુથી બીજા અંત્યબિંદુ સુધી +q વિદ્યુતભારને લઈ જવા માટે +Q વિદ્યુતભાર વડે ઉદ્ભવતા વિદ્યુતક્ષેત્ર વડે થતું કાર્ય ______ હશે.",
                                question_en: "A charge +Q is placed at the center of a circular path of radius r. The work done by the electric field produced by +Q charge to move a +q charge from one end point of a diameter to the other end point of this circular path will be ______.",
                                options_gu: ["$\\frac{2kQq}{r}$", "$\\frac{kQq}{2r}$", "શૂન્ય", "$\\frac{kQq}{r}$"],
                                options_en: ["$\\frac{2kQq}{r}$", "$\\frac{kQq}{2r}$", "Zero", "$\\frac{kQq}{r}$"],
                                answer: 2,
                                imageUrl: "image_6297c4.png-467a1e70-08bd-40cb-946e-9a78dd8ce0ff",
                            },
                            {
                                question_gu: "સુવાહકને વિદ્યુતક્ષેત્રમાં મુકતાં પ્રાપ્ત સ્થિતવિદ્યુત શાસ્ત્રના પરિણામોમાંથી નીચે આપેલ વિકલ્પોમાંથી કયો વિકલ્પ ખોટો છે.",
                                question_en: "Which of the following options is incorrect among the results of electrostatics obtained by placing a conductor in an electric field?",
                                options_gu: ["સુવાહકના સમગ્ર કદમાં વિદ્યુતસ્થિતિમાન સમાન હોય છે.", "સુવાહકની સપાટી પર વિદ્યુતક્ષેત્ર લંબરૂપે હોય છે.", "સુવાહકના અંદરના વિસ્તારમાં વધારાનો વિદ્યુતભાર હોય છે.", "સુવાહકની અંદર વિદ્યુતક્ષેત્ર શૂન્ય હોય છે."],
                                options_en: ["The electric potential is uniform throughout the volume of the conductor.", "The electric field is perpendicular to the surface of the conductor.", "There is excess charge in the interior of the conductor.", "The electric field inside the conductor is zero."],
                                answer: 2,
                                imageUrl: "image_629768.jpg-40903f73-a8ee-44cc-83dd-7288458932a5",
                            },
                            {
                                question_gu: "ચાર્જ કરેલ કેપેસિટરને બેટરીથી અલગ કરી કેપેસિટરની બે પ્લેટ વચ્ચેના અંતરમાં વધારો કરવામાં આવે તો ______ .",
                                question_en: "If a charged capacitor is disconnected from the battery and the distance between its two plates is increased, then ______.",
                                options_gu: ["કેપેસિટરના કેપેસિટન્સમાં વધારો થાય.", "પ્લેટ પરનો વિદ્યુતભાર અચળ રહે.", "બે પ્લેટ વચ્ચેનો વિદ્યુત સ્થિતિમાનનો તફાવત ઘટે.", "પ્લેટ પરનો વિદ્યુતભાર ઘટે."],
                                options_en: ["The capacitance of the capacitor increases.", "The charge on the plates remains constant.", "The potential difference between the two plates decreases.", "The charge on the plates decreases."],
                                answer: 1,
                                imageUrl: "image_629768.jpg-40903f73-a8ee-44cc-83dd-7288458932a5",
                            },
                            {
                                question_gu: "12pF ના એક કેપેસિટરને 50V ની બેટરી સાથે જોડવામાં આવે તો તેમાં સંગ્રહીત ઊર્જા ______ હશે.",
                                question_en: "If a 12pF capacitor is connected to a 50V battery, the energy stored in it will be ______.",
                                options_gu: ["$3 \\times 10^{-8}$ J", "$1.5 \\times 10^{-6}$ J", "$1.5 \\times 10^{-8}$ J", "$1.5 \\times 10^{-12}$ J"],
                                options_en: ["$3 \\times 10^{-8}$ J", "$1.5 \\times 10^{-6}$ J", "$1.5 \\times 10^{-8}$ J", "$1.5 \\times 10^{-12}$ J"],
                                answer: 2,
                                imageUrl: "image_629458.png-8920c213-88bd-4e02-2a64c6ba7061",
                            },
                            // PYQ જુલાઈ 2024 Questions
                            {
                                question_gu: "9cm ની બાજુવાળા નિયમિત ષટ્કોણના દરેક શિરોબિંદુ પર 5$\\mu$C વિદ્યુતભાર છે. ષટ્કોણના કેન્દ્ર પર વિદ્યુત સ્થિતિમાન ______ V. (K=9$\\times 10^9$Nm$^2$C$^{-2}$)",
                                question_en: "A regular hexagon with sides of 9cm has a 5$\\mu$C charge at each vertex. The electric potential at the center of the hexagon is ______ V. (K=9$\\times 10^9$Nm$^2$C$^{-2}$)",
                                options_gu: ["3$\\times 10^7$", "3$\\times 10^6$", "3$\\times 10^5$", "3$\\times 10^8$"],
                                options_en: ["3$\\times 10^7$", "3$\\times 10^6$", "3$\\times 10^5$", "3$\\times 10^8$"],
                                answer: 1,
                                imageUrl: "image_219afd.png-20234712-bfac-47ef-962d-0b7fa5d4e1a8",
                            },
                            {
                                question_gu: "12pF નું એક કેપેસિટર 50V ની બેટરી સાથે જોડે છે. કેપેસિટરમા સંગ્રહ પામતી સ્થિત વિદ્યુત ઊર્જા ______ J.",
                                question_en: "A 12pF capacitor is connected to a 50V battery. The electrostatic energy stored in the capacitor is ______ J.",
                                options_gu: ["1.5$\\times 10^{-8}$", "2.5$\\times 10^{-8}$", "1.5$\\times 10^{-10}$", "2.5$\\times 10^{-10}$"],
                                options_en: ["1.5$\\times 10^{-8}$", "2.5$\\times 10^{-8}$", "1.5$\\times 10^{-10}$", "2.5$\\times 10^{-10}$"],
                                answer: 0,
                                imageUrl: "image_219afd.png-20234712-bfac-47ef-962d-0b7fa5d4e1a8",
                            },
                            {
                                question_gu: "સમાંતર પ્લેટ કેપેસિટરની સીમિત ક્ષેત્રફળની પ્લેટો માટે, કિનારીઓ પાસે વિદ્યુતક્ષેત્ર રેખાઓ બહાર તરફ વળે છે. આ ઘટનાને ______ કહે છે.",
                                question_en: "For parallel plate capacitors with finite area plates, the electric field lines bend outwards near the edges. This phenomenon is called ______.",
                                options_gu: ["સ્થિતવિદ્યુત શીલ્ડીંગ", "ધ્રુવીભવન", "ફે-રિંગ વોલ્ટ એન્ડ ફિલ્ડ્સ", "વિવર્તન"],
                                options_en: ["Electrostatic shielding", "Polarization", "Fringing fields", "Diffraction"],
                                answer: 1, // Note: The original answer for this question was 1 (Polarization), but the solution text mentions 'Fringing Effect'. I've kept the original answer.
                                imageUrl: "image_219afd.png-20234712-bfac-47ef-962d-0b7fa5d4e1a8",
                            }
                        ]
                    },
                    {
                        id: 'chapter2-pyq2023-combined',
                        name_gu: 'PYQ 2023 (સંયુક્ત)',
                        name_en: 'PYQ 2023 (Combined)',
                        questions: [
                            // PYQ GUJCET 2023 Questions
                            {
                                question_gu: "નીચેની આકૃતિમાં B બિંદુ આગળનું વિદ્યુતસ્થિતિમાન ______ V છે.",
                                question_en: "In the figure below, the electric potential at point B is ______ V.",
                                options_gu: ["25", "30", "22", "50"],
                                options_en: ["25", "30", "22", "50"],
                                answer: 2, 
                                imageUrl: "image_12ad04.png-286665af-a867-4225-8459-abdd737e1e99",
                            },
                            {
                                question_gu: "10 cm ત્રિજ્યાના વર્તુળના કેન્દ્ર પર Q વિદ્યુતભાર મુકેલો છે. આ વર્તુળની ચાપ પર q વિદ્યુતભારને એક બિંદુથી બીજા બિંદુ સુધી લઈ જવા માટે કરવા પડતું કાર્ય કેટલું હશે?",
                                question_en: "A charge Q is placed at the center of a circle of radius 10 cm. What will be the work done to move a charge q from one point to another point on the arc of this circle?",
                                options_gu: ["0 J", "KQq J", "0.5 KQq J", "0.1 KQq J"],
                                options_en: ["0 J", "KQq J", "0.5 KQq J", "0.1 KQq J"],
                                answer: 0,
                                imageUrl: "image_12ad04.png-286665af-a867-4225-8459-abdd737e1e99",
                            },
                            {
                                question_gu: "હવાની ડાઈ ઈલેક્ટ્રીક સ્ટ્રેન્થ ______ છે.",
                                question_en: "The dielectric strength of air is ______.",
                                options_gu: ["3$\\times 10^9$ V/m", "3$\\times 10^9$ V/cm", "3$\\times 10^9$ V/$\\mu$m", "3$\\times 10^9$ V/mm"],
                                options_en: ["3$\\times 10^9$ V/m", "3$\\times 10^9$ V/cm", "3$\\times 10^9$ V/$\\mu$m", "3$\\times 10^9$ V/mm"],
                                answer: 0,
                                imageUrl: "image_12ad04.png-286665af-a867-4225-8459-abdd737e1e99",
                            },
                            // PYQ માર્ચ 2023 Questions
                            {
                                question_gu: "આકૃતિઓ ધન અને ઋણ વીજભારોની અનુક્રમે ક્ષેત્રરેખાઓ દર્શાવે છે. સ્થિતિમાન તફાવત $V_Q - V_P$ અને $V_B - V_A$ નાં ચિન્હો જણાવો.",
                                question_en: "Figures show the field lines of positive and negative charges respectively. State the signs of potential difference $V_Q - V_P$ and $V_B - V_A$.",
                                options_gu: ["ઋણ, ધન", "ધન, ઋણ", "ધન, ધન", "ઋણ, ઋણ"],
                                options_en: ["Negative, Positive", "Positive, Negative", "Positive, Positive", "Negative, Negative"],
                                answer: 0,
                                imageUrl: "image_1312e2.jpg-d3e6e331-e050-4776-bb63-cbd81aa8549b",
                            },
                            {
                                question_gu: "એક વીજભારિત કેપેસિટરની ઊર્જા U છે. હવે બેટરી દૂર કરી તેનો તેવાજ બીજા બે વીજભારરહિત કેપેસિટર સાથે સમાંતરમાં જોડવામાં આવે છે. હવે દરેક કેપેસિટરની ઊર્જા કેટલી થશે?",
                                question_en: "A charged capacitor has energy U. Now, the battery is removed and it is connected in parallel with two other similar uncharged capacitors. What will be the energy of each capacitor now?",
                                options_gu: ["U/4", "3U/2", "U", "U/9"],
                                options_en: ["U/4", "3U/2", "U", "U/9"],
                                answer: 3,
                                imageUrl: "image_13129e.png-3940b449-50e4-49d3-9cc2-a6e3b89846f4",
                            },
                            {
                                question_gu: "સમાન વિદ્યુતક્ષેત્રમાં 2$\\mu$C વીજભારની વિદ્યુત-સ્થિતિમાન ઊર્જા કોઈ બિંદુ પાસે $3 \\times 10^{-5}$ J છે. તો તે બિંદુ પાસેનું વીજસ્થિતિમાન ______ V.",
                                question_en: "The electric potential energy of a 2$\\mu$C charge at a point in a uniform electric field is $3 \\times 10^{-5}$ J. What is the electric potential at that point?",
                                options_gu: ["5", "15", "6", "શૂન્ય"],
                                options_en: ["5", "15", "6", "Zero"],
                                answer: 1,
                                imageUrl: "image_131240.png-7cf665f5-1efa-4dd9-ba9a-e35a55d68cc3",
                            },
                            {
                                question_gu: "અશૂન્ય વીજભારોના સમૂહ વડે ખૂબ મોટા અંતરે ઉદ્ભવતા સમસ્થિતિમાન પૃષ્ઠનો આકાર કેવો હોય છે?",
                                question_en: "What is the shape of the equipotential surface produced by a group of non-zero charges at very large distances?",
                                options_gu: ["પરવલય", "સમતલ", "ગોળાકાર", "દીર્ઘવૃત્તીય"],
                                options_en: ["Parabolic", "Planar", "Spherical", "Elliptical"],
                                answer: 2,
                            }
                        ]
                    }
                ]
            }
        ];

        // English translations for UI elements
        const translations = {
            gu: {
                mainTitle: "NEET PHYSICS GUJARATI : GSEB - NEET QUIZ PORTAL",
                homeDescription: "GSEB બોર્ડ પરીક્ષાના પાછલા વર્ષના પ્રશ્નો (PYQ) પર આધારિત ક્વિઝ દ્વારા તમારા ભૌતિકશાસ્ત્રના જ્ઞાનને ચકાસો અને પરીક્ષાની તૈયારી કરો.",
                startQuiz: "ક્વિઝ શરૂ કરો",
                questionPrefix: "પ્રશ્ન",
                imagePlaceholder: "આ પ્રશ્ન માટેની છબી ઉપલબ્ધ નથી",
                solutionHeading: "ઉકેલ:",
                prevButton: "પાછળ",
                nextButton: "આગળ",
                scoreTextPrefix: "સ્કોર:",
                quizCompleteTitle: "ક્વિઝ પૂર્ણ!",
                scoreSummary: (score, total) => `તમે ${total} માંથી ${score} પ્રશ્નોના સાચા જવાબ આપ્યા`,
                encouragement90: "અત્યુત્તમ! તમે આ વિષયમાં નિપુણતા મેળવી છે.",
                encouragement70: "ખૂબ સરસ! તમારી તૈયારી સારી છે.",
                encouragement50: "સારું! વધુ સમીક્ષા કરીને તમે સુધારો કરી શકો છો.",
                encouragementLess50: "હજુ સુધારાની જરૂર છે. ફરીથી પ્રયાસ કરો.",
                goToHome: "હોમ પેજ પર જાઓ",
                noQuestions: "આ ક્વિઝમાં કોઈ પ્રશ્નો નથી. કૃપા કરીને પ્રશ્નો ઉમેરો."
            },
            en: {
                mainTitle: "NEET PHYSICS GUJARATI : GSEB - NEET QUIZ PORTAL (English UI)",
                homeDescription: "Test your Physics knowledge and prepare for exams with quizzes based on Previous Year Questions (PYQ) from GSEB Board Exams.",
                startQuiz: "Start Quiz",
                questionPrefix: "Question",
                imagePlaceholder: "Image not available for this question",
                solutionHeading: "Solution:",
                prevButton: "Previous",
                nextButton: "Next",
                scoreTextPrefix: "Score:",
                quizCompleteTitle: "Quiz Complete!",
                scoreSummary: (score, total) => `You answered ${score} out of ${total} questions correctly`,
                encouragement90: "Excellent! You have mastered this topic.",
                encouragement70: "Very good! Your preparation is solid.",
                encouragement50: "Good! You can improve with more review.",
                encouragementLess50: "Still needs improvement. Please try again.",
                goToHome: "Go to Home Page",
                noQuestions: "There are no questions in this quiz. Please add questions."
            }
        };

        // --- DOM Elements ---
        const languageToggleBtn = document.getElementById('language-toggle-btn');
        const mainTitle = document.getElementById('main-title');
        const homeDescription = document.getElementById('home-description');
        const homePage = document.getElementById('home-page');
        const chaptersContainer = document.getElementById('chapters-container');
        const quizPage = document.getElementById('quiz-page');
        const quizTitle = document.getElementById('quiz-title');
        const quizDescription = document.getElementById('quiz-description');
        const resultContainer = document.getElementById('result-container');
        const questionText = document.getElementById('question-text');
        const optionsContainer = document.getElementById('options-container');
        const solutionDisplay = document.getElementById('solution-display');
        const solutionHeadingText = document.getElementById('solution-heading-text'); 
        const solutionText = document.getElementById('solution-text');
        const nextBtn = document.getElementById('next-btn');
        const prevBtn = document.getElementById('prev-btn');
        const restartBtn = document.getElementById('restart-btn');
        const progressText = document.getElementById('progress');
        const progressBar = document.getElementById('progress-bar');
        const scoreText = document.getElementById('score-text');
        const scorePercentage = document.getElementById('score-percentage');
        const encouragementText = document.getElementById('encouragement');
        const questionImage = document.getElementById('question-image');
        const imagePlaceholder = document.getElementById('image-placeholder');
        const imagePlaceholderText = document.getElementById('image-placeholder-text');
        const currentScore = document.getElementById('current-score');
        const scoreValue = document.getElementById('score-value');
        const totalQuestions = document.getElementById('total-questions');
        const quizCompleteTitle = document.getElementById('quiz-complete-title');


        // --- App State ---
        let currentLanguage = 'gu'; // Default language is Gujarati
        let currentQuestionIndex = 0;
        let score = 0;
        let currentQuizQuestions = [];
        let currentChapter = null;
        let currentQuiz = null;
        let userAnswers = [];

        // --- Core Functions ---

        function renderMathJax(elements) {
            if (window.MathJax && window.MathJax.typesetPromise) {
                MathJax.typesetPromise(elements).catch((err) => console.error('MathJax typesetting failed:', err));
            }
        }

        function updateUIText() {
            const lang = translations[currentLanguage];
            mainTitle.innerText = lang.mainTitle;
            homeDescription.innerText = lang.homeDescription;
            quizCompleteTitle.innerText = lang.quizCompleteTitle;
            solutionHeadingText.innerText = lang.solutionHeading; 
            prevBtn.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 inline mr-1" viewBox="0 0 20 20" fill="currentColor">
                                <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd" />
                            </svg>${lang.prevButton}`;
            nextBtn.innerHTML = `${lang.nextButton}<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 inline ml-1" viewBox="0 0 20 20" fill="currentColor">
                                <path fill-rule="evenodd" d="M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z" clip-rule="evenodd" />
                            </svg>`;
            restartBtn.innerText = lang.goToHome;
            imagePlaceholderText.innerText = lang.imagePlaceholder;

            if (!homePage.classList.contains('hidden')) {
                renderHomePageContent(); 
            } else if (!quizPage.classList.contains('hidden')) {
                updateProgressText();
                showQuestion(); // Re-render current question when language changes on quiz page
            } else if (!resultContainer.classList.contains('hidden')) {
                showScore(); 
            }
        }

        function toggleLanguage() {
            currentLanguage = currentLanguage === 'gu' ? 'en' : 'gu';
            document.documentElement.lang = currentLanguage; 
            updateUIText(); 
            if (!homePage.classList.contains('hidden')) {
                renderHomePageContent(); 
            }
        }
        
        function updateProgressText() {
            const lang = translations[currentLanguage];
            progressText.innerHTML = `<strong>${lang.questionPrefix} ${currentQuestionIndex + 1}</strong> / ${currentQuizQuestions.length}`;
            currentScore.innerHTML = `${lang.scoreTextPrefix} <span id="score-value">${score}</span>/<span id="total-questions">${currentQuizQuestions.length}</span>`;
        }

        function renderHomePageContent() {
            chaptersContainer.innerHTML = '';
            const lang = translations[currentLanguage];

            chapterData.forEach(chapter => {
                const chapterCard = document.createElement('div');
                chapterCard.className = 'chapter-card p-6';
                
                let quizButtonsHTML = chapter.quizzes.map(quiz => `
                    <button class="quiz-btn text-white font-medium py-3 px-4 mb-3"
                            onclick="loadQuiz('${chapter.id}', '${quiz.id}')">
                        ${quiz[`name_${currentLanguage}`]} ${lang.startQuiz}
                    </button>
                `).join('');

                chapterCard.innerHTML = `
                    <h2 class="text-2xl font-semibold text-slate-800 mb-3">${chapter[`name_${currentLanguage}`]}</h2>
                    <p class="text-slate-600 mb-4">${chapter[`description_${currentLanguage}`]}</p>
                    <div class="space-y-3 mt-5">${quizButtonsHTML}</div>
                `;
                chaptersContainer.appendChild(chapterCard);
            });
        }

        function renderHomePage() {
            homePage.classList.remove('hidden');
            quizPage.classList.add('hidden');
            resultContainer.classList.add('hidden');
            renderHomePageContent(); 
            updateUIText(); 
        }

        function loadQuiz(chapterId, quizId) {
            currentChapter = chapterData.find(c => c.id === chapterId);
            currentQuiz = currentChapter.quizzes.find(q => q.id === quizId);
            currentQuizQuestions = [...currentQuiz.questions];
            userAnswers = new Array(currentQuizQuestions.length).fill(null);

            quizTitle.innerText = `${currentChapter[`name_${currentLanguage}`]} : ${currentQuiz[`name_${currentLanguage}`]}`;
            quizDescription.innerText = currentChapter[`description_${currentLanguage}`];

            homePage.classList.add('hidden');
            quizPage.classList.remove('hidden');
            startQuiz();
        }

        function startQuiz() {
            currentQuestionIndex = 0;
            score = 0;
            userAnswers.fill(null);
            resultContainer.classList.add('hidden');
            nextBtn.classList.add('hidden');
            prevBtn.classList.add('hidden');
            currentScore.classList.add('hidden');
            showQuestion();
        }

        function showQuestion() {
            resetState();
            const currentQuestion = currentQuizQuestions[currentQuestionIndex];
            const lang = translations[currentLanguage];
            
            if (!currentQuestion) {
                questionText.innerHTML = lang.noQuestions;
                optionsContainer.innerHTML = "";
                nextBtn.classList.add('hidden');
                solutionDisplay.classList.add('hidden');
                progressText.innerHTML = `<strong>${lang.questionPrefix} 0</strong> / 0`;
                progressBar.style.width = `0%`;
                return;
            }

            // Update progress
            const progressPercentage = (currentQuestionIndex / currentQuizQuestions.length) * 100;
            progressBar.style.width = `${progressPercentage}%`;
            updateProgressText(); 
            
            // Display question text
            questionText.innerHTML = currentQuestion[`question_${currentLanguage}`];
            
            // Handle image
            questionImage.classList.add('hidden');
            imagePlaceholder.classList.add('hidden');
            
            if (currentQuestion.imageUrl) {
                questionImage.src = currentQuestion.imageUrl;
                questionImage.onload = () => {
                    questionImage.classList.remove('hidden');
                };
                questionImage.onerror = () => {
                    imagePlaceholder.classList.remove('hidden');
                };
            }

            // Display options
            currentQuestion[`options_${currentLanguage}`].forEach((option, index) => {
                const button = document.createElement('button');
                button.innerHTML = option;
                button.classList.add('option-btn', 'w-full', 'p-4', 'text-left', 'bg-white', 'text-slate-700', 'mb-2');
                
                // Check if user already answered this question
                if (userAnswers[currentQuestionIndex] !== null) {
                    if (userAnswers[currentQuestionIndex] === index) {
                        if (index === currentQuestion.answer) {
                            button.classList.add('correct');
                        } else {
                            button.classList.add('incorrect');
                        }
                    }
                    if (index === currentQuestion.answer) {
                        button.classList.add('correct');
                    }
                    button.disabled = true;
                }
                
                button.dataset.index = index;
                button.addEventListener('click', selectAnswer);
                optionsContainer.appendChild(button);
            });
            
            // Solution display is always hidden now
            solutionDisplay.classList.add('hidden');
            
            // Show previous button if not first question
            if (currentQuestionIndex > 0) {
                prevBtn.classList.remove('hidden');
            } else {
                prevBtn.classList.add('hidden');
            }
            
            renderMathJax([questionText, optionsContainer]); // Only render MathJax for question and options
        }

        function resetState() {
            nextBtn.classList.add('hidden');
            solutionDisplay.classList.add('hidden'); // Ensure solution is always hidden on new question
            optionsContainer.innerHTML = '';
        }

        function selectAnswer(e) {
            const selectedBtn = e.currentTarget;
            const selectedIndex = parseInt(selectedBtn.dataset.index);
            const currentQuestion = currentQuizQuestions[currentQuestionIndex];
            const correctIndex = currentQuestion.answer;
            
            // Save user answer
            userAnswers[currentQuestionIndex] = selectedIndex;
            
            // Update progress bar
            const newProgressPercentage = ((currentQuestionIndex + 1) / currentQuizQuestions.length) * 100;
            progressBar.style.width = `${newProgressPercentage}%`;

            if (selectedIndex === correctIndex) {
                selectedBtn.classList.add('correct');
                score++;
                scoreValue.textContent = score;
            } else {
                selectedBtn.classList.add('incorrect');
            }

            Array.from(optionsContainer.children).forEach(button => {
                if (parseInt(button.dataset.index) === correctIndex) {
                    button.classList.add('correct');
                }
                button.disabled = true;
            });
            
            // Solution is not displayed as per user request
            solutionDisplay.classList.add('hidden'); 

            if (currentQuestionIndex < currentQuizQuestions.length) {
                nextBtn.classList.remove('hidden');
            }
        }

        function handleNextButton() {
            currentQuestionIndex++;
            if (currentQuestionIndex < currentQuizQuestions.length) {
                showQuestion();
            } else {
                showScore();
            }
        }
        
        function handlePrevButton() {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                showQuestion();
            }
        }

        function showScore() {
            quizPage.classList.add('hidden');
            resultContainer.classList.remove('hidden');
            
            // Update progress bar to 100%
            progressBar.style.width = `100%`;
            
            const percentage = Math.round((score / currentQuizQuestions.length) * 100);
            const lang = translations[currentLanguage];
            
            scoreText.innerHTML = lang.scoreSummary(score, currentQuizQuestions.length);
            scorePercentage.innerHTML = `${percentage}%`;
            
            // Set encouragement message
            if (percentage >= 90) {
                encouragementText.innerHTML = lang.encouragement90;
            } else if (percentage >= 70) {
                encouragementText.innerHTML = lang.encouragement70;
            } else if (percentage >= 50) {
                encouragementText.innerHTML = lang.encouragement50;
            } else {
                encouragementText.innerHTML = lang.encouragementLess50;
            }
            
            // Animate score bars
            const bars = [
                document.getElementById('score-bar-1'),
                document.getElementById('score-bar-2'),
                document.getElementById('score-bar-3'),
                document.getElementById('score-bar-4'),
                document.getElementById('score-bar-5')
            ];
            
            const targetWidths = [20, 40, 60, 80, 100];
            const scorePerBar = Math.ceil(currentQuizQuestions.length / 5);
            
            setTimeout(() => {
                bars.forEach((bar, index) => {
                    const barScore = Math.min(score - (index * scorePerBar), scorePerBar);
                    const barPercentage = Math.max(0, (barScore / scorePerBar) * 100);
                    
                    setTimeout(() => {
                        bar.style.width = `${barPercentage}%`;
                    }, index * 300);
                });
            }, 500);
        }

        // --- Event Listeners ---
        nextBtn.addEventListener('click', handleNextButton);
        prevBtn.addEventListener('click', handlePrevButton);
        restartBtn.addEventListener('click', renderHomePage);
        languageToggleBtn.addEventListener('click', toggleLanguage);

        // --- Initial Load ---
        document.addEventListener('DOMContentLoaded', () => {
            renderHomePage(); 
        });
    </script>
</body>
</html>
